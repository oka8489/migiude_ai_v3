# Migiude設計書 v1.0
**2026年2月5日**

---

## コンセプト

**「聞くだけでいい。DBは勝手にできる。」**

従来のAIシステムは「まずデータを整備してください」から始まる。
Migiudeは**「何か聞いてください」**から始まる。

**「過去の全ての工事経験を、いつでも引き出せる右腕」**
— だからMigiude。

---

## Migiudeで何ができるか

### 1. 書類作成の自動化
「この工事の施工計画書作って」→ 過去工事DBから類似案件を参照 → テンプレートに自動記入 → Excelで出力

**従来：** 過去の書類を探す → コピペ → 修正 → 数時間
**Migiude：** 聞くだけ → 数分

### 2. 過去工事の即時検索
「去年の舗装工事で3000万以上のやつどれ？」
「日田で排水トラブルあった工事ある？」
「後藤さんが現場代理人だった工事全部出して」

→ 自然言語で聞くだけ。SQLを書く必要なし。

### 3. ナレッジの自動蓄積
会話するだけでNeo4jに関係性が溜まる。
「この現場、地下水が高いから気をつけて」→ 地域特性として記録
「あの工事と同じ工法でいこう」→ 工事間の参照関係として記録

ベテランの頭の中にしかなかった知識がDBになる。

### 4. 先回り提案
質問パターンが溜まれば、時期に応じて先に提案。
「来月中間検査ですね。これ準備しておきますか？」

### 5. 新人教育
「なんでこの工法にしたの？」→ 過去の判断理由をDBから引き出せる
ベテランがいなくても、過去の意思決定を追える。

### 6. 見積・積算の参考
「この規模の舗装工事、過去いくらだった？」→ 類似案件の単価・数量を即座に参照

---

## 建設会社の使い方

### 日常の使用イメージ

1. 朝、事務所でPCを開く
2. Migiudeに話しかける（チャット or 音声）
3. 「今日の現場の安全注意事項出して」→ 天気・工種・過去事例から自動生成
4. 「施工計画書の工事概要、埋めといて」→ Excelが自動で開いて記入される
5. 現場から戻って「今日の進捗、排水管50m敷設完了」→ DBに自動記録

### 必要な環境

- PC（Windows）
- インターネット接続
- Excel（既存のもので可）
- 過去工事のファイル（整理されてなくてOK）

### 初期設定

1. 過去工事フォルダをMigiudeに教える
2. 最初の質問をする
3. 以上。使いながらDBが育つ。

---

## システム構成

```
┌─────────────────────────────────────────────────────────┐
│                    ユーザー（建設会社）                    │
│                  チャット / 音声 / Excel                   │
└─────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────┐
│                    LLMエンジン（交換可能）                 │
│          Claude / GPT / Gemini / ローカルLLM             │
└─────────────────────────────────────────────────────────┘
                              │
                          /m コマンド
                              │
                              ▼
┌─────────────────────────────────────────────────────────┐
│                      Migiude MCP                         │
│  ┌─────────────────────────────────────────────────┐    │
│  │              Orchestrator（指揮者）              │    │
│  │   質問を解釈し、適切なTool/Skillを呼び出す       │    │
│  └─────────────────────────────────────────────────┘    │
│                          │                               │
│         ┌────────────────┼────────────────┐              │
│         ▼                ▼                ▼              │
│  ┌───────────┐    ┌───────────┐    ┌───────────┐        │
│  │   Skill   │    │   Skill   │    │   Skill   │        │
│  │ 施工計画書 │    │  数量表   │    │  安全書類  │        │
│  └───────────┘    └───────────┘    └───────────┘        │
│         │                │                │              │
│         └────────────────┼────────────────┘              │
│                          ▼                               │
│  ┌─────────────────────────────────────────────────┐    │
│  │                    Tool層                        │    │
│  │    SQLite / Chroma / Neo4j / Excel / File       │    │
│  └─────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────┘
```

### /m コマンド

ユーザーが覚えるのは `/m` だけ。

```
/m 3000万以上の工事         → DB検索
/m これ覚えて               → 知識保存
/m 施工計画書作って         → Excel書き込み
/m このフォルダ読み込んで   → ファイルパース
```

Migiude MCPの中で意図を解釈して適切な処理に振り分ける。

### Migiude MCP

全てのDB・Toolを1つのMCPパッケージに統合。

- LLMからは `/m` で呼ぶだけ
- 内部でSQLite / Chroma / Neo4j / Excel / Fileを束ねる
- 逆算型DB構築のロジックもMCP側に持つ
- LLMを変えてもMigiude MCPは同じ

### LLMは交換可能

- Migiudeの価値はLLMではなく**Skill層とDB層**
- Claude、GPT、Geminiどれでも動く
- 将来ローカルLLMでも可（コスト削減・オフライン対応）
- 各社の要件（コスト・セキュリティ・速度）で選択

### Excel連携

- Excelを開いたまま、AIが直接セルに書き込む
- ユーザーは書き込まれていく様子をリアルタイムで見られる
- 既存のテンプレートをそのまま使える
- マクロ不要、VBA不要

### 将来のTool拡張

現在：
- Excel（書類作成）
- SQLite（構造化データ）
- Chroma（テキスト検索）
- Neo4j（関係性グラフ）
- File（ファイル操作）

将来追加予定：
- **写真管理** → 工事写真の自動分類・台帳作成
- **CAD連携** → 図面から数量自動拾い出し
- **積算** → 単価データベース連携
- **電子納品** → 自治体フォーマット自動変換
- **音声入力** → 現場からハンズフリーで報告
- **スケジュール** → 工程表自動更新

Toolが増えても、ユーザーは `/m` だけ。

---

## 逆算型DB構築

データを先に入れない。質問から逆算してDBを作る。

```
ユーザーの質問
    ↓
穴を検出（DBにないフィールド）
    ↓
該当ファイルを特定
    ↓
パーサー自動生成
    ↓
全件補完（1件だけでなく全工事）
    ↓
DB格納（JSON経由）
    ↓
回答
    ↓
パーサーをSkill保存
```

1つの質問が、DB全体のスキーマ拡張のトリガーになる。

---

## DB 4層構造

| Layer | 名称 | 内容 |
|-------|------|------|
| 1 | インフラ構築MEMO | Migiude自体の設計知識・ルール・ガイド |
| 2 | 過去工事 | readme / index / DB（逆算型で育つ） |
| 3 | 今工事 | DB / index（リアルタイム更新） |
| 4 | 書類作成 | テンプレート / 自動書類化ガイド（Skill） |

データの流れ：**2 → 3 → 4**
過去を参照 → 今の工事に適用 → 書類に出力

---

## 3つのDBの役割分担

| DB | 役割 | データソース |
|----|------|-------------|
| SQLite | 事実データ（金額、数量、日付） | ファイルパース |
| Chroma | テキスト検索（文書内容） | ファイルパース |
| Neo4j | 関係性と暗黙知 | **会話から** |

Neo4jだけは会話から育つ。書類に書いてない知識（「この工事はあの工事を参考にした」等）を蓄積。

---

## データパイプライン

```
ファイル → パーサー → JSON → （人が確認）→ DB
```

- JSONで正規化することで構造が明確になる
- バリデーション可能
- どのDB種別にも入る

---

## スキーマの考え方

**1工事を丁寧に構造化すれば、それが建設業界共通のデータスキーマになる。**

建設業は書類体系が法規制で決まっている。施工計画書、設計書、打合せ簿... どの会社も同じ種類の書類を作っている。

- **スキーマ** = 建設業の知識構造（業界共通）
- **パーサー** = テンプレート差異の吸収（会社ごと）
- **データ** = 各社の実績（会社固有）

---

## 質問スキーマ

1社を1年追いかければ、質問パターンも体系化できる。

- 4月：「今年の工事の施工計画書作って」
- 6月：「梅雨の安全対策どうしてた？」
- 10月：「中間検査の書類揃ってる？」
- 2月：「完成検査の写真まとめて」

質問パターンが溜まれば**先回りできる**。聞かれる前に「そろそろこれ必要ですよね」。

---

## ビジネスモデル

### 収益構造

**導入費（初期）**
- 初期設定・過去工事フォルダ連携
- 基本Skillセットの導入
- 使い方レクチャー

**月額サブスク（継続）**
- Migiude利用料
- LLM API費用込み
- Skill・DB容量に応じたプラン

### Migiudeが提供するもの
- 建設業のデータスキーマ
- 質問スキーマ
- パーサー生成エンジン
- Migiude MCP（全Tool統合）

### 各社に育つもの（顧客の資産）
- 自社の過去工事DB
- 自社のSkill群
- 自社の質問パターン

**使うほどDBが育つからやめられない。データは各社のものだから安心して使える。**

### AIインフラエンジニア

社内にSEがいるように、**NE：ナレッジエンジニア**という職業を作る

- 質問を設計してDBを育てる
- ベテランの暗黙知を引き出してシステム化する
- Migiudeを社内に定着させる推進役

大企業：自社で育成
中小企業：外部から派遣 or Migiude側がサポート

---

## 技術メモ：Excel MCP運用ルール

- OLEバックエンド（Excelが開いている時）は不安定
- シート跨ぎで書き込むとクラッシュする
- 安全に使うなら同一シート内の操作に留める
- Excelを閉じた状態（excelizeバックエンド）なら安定

---

## CCAデモで伝えること

**「データ整備不要。AI学習不要。聞くだけ。」**

空のシステムを見せて → 質問1つ投げる → 目の前でデータが生まれる → Excelに記入される → 「2回目はもう速いです」